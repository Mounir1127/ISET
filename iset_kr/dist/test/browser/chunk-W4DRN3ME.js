import{a as S}from"./chunk-FTVJFWHL.js";import{b as F,c as f,d as E,e as k,i as I,l as O,m as z,v as L,x as N}from"./chunk-A3SAA77A.js";import"./chunk-JXVCW6UT.js";import{e as M,h as P}from"./chunk-OLM244A5.js";import"./chunk-EVJP5UTO.js";import"./chunk-RGDPBHKT.js";import{$ as x,D as u,Ja as n,Na as p,Sa as v,Xa as c,_ as b,cb as l,cc as w,eb as _,gb as o,hb as i,hc as y,ib as s,lb as h,mb as C,nb as m,tb as a,ub as g}from"./chunk-VLARTZ6X.js";function G(t,r){if(t&1&&(o(0,"div",16),s(1,"i",17),o(2,"div"),a(3),i()()),t&2){let e=m();n(3),g(e.successMessage)}}function A(t,r){if(t&1&&(o(0,"div",18),s(1,"i",19),o(2,"div"),a(3),i()()),t&2){let e=m();n(3),g(e.errorMessage)}}function q(t,r){t&1&&(o(0,"div",28),a(1," L'email est requis. "),i())}function D(t,r){t&1&&(o(0,"div",28),a(1," Veuillez utiliser votre email institutionnel (@isetk.rnu.tn). "),i())}function j(t,r){t&1&&(o(0,"span"),s(1,"i",29),a(2," Envoi..."),i())}function R(t,r){t&1&&(o(0,"span"),a(1,"Envoyer le lien "),s(2,"i",30),i())}function B(t,r){if(t&1){let e=h();o(0,"form",20),C("ngSubmit",function(){b(e);let V=m();return x(V.onSubmit())}),o(1,"div",21)(2,"label",22),s(3,"i",23),a(4,"Email Acad\xE9mique"),i(),s(5,"input",24),c(6,q,2,0,"div",25)(7,D,2,0,"div",25),i(),o(8,"button",26),c(9,j,3,0,"span",27)(10,R,3,0,"span",27),i()()}if(t&2){let e=m();l("formGroup",e.forgotForm),n(5),_("is-invalid",(e.emailControl==null?null:e.emailControl.invalid)&&((e.emailControl==null?null:e.emailControl.touched)||(e.emailControl==null?null:e.emailControl.dirty))),n(),l("ngIf",e.emailControl==null?null:e.emailControl.hasError("required")),n(),l("ngIf",e.emailControl==null?null:e.emailControl.hasError("pattern")),n(),l("disabled",e.forgotForm.invalid||e.isLoading),n(),l("ngIf",e.isLoading),n(),l("ngIf",!e.isLoading)}}var T=class t{constructor(r,e){this.fb=r;this.authService=e;this.isLoading=!1;this.successMessage="";this.errorMessage="";this.forgotForm=this.fb.group({email:["",[f.required,f.email,f.pattern(/^[a-zA-Z0-9._%+-]+@.*rnu\.tn$/)]]})}onSubmit(){if(this.forgotForm.invalid)return;this.isLoading=!0,this.errorMessage="",this.successMessage="";let r=this.forgotForm.get("email")?.value;this.authService.forgotPassword(r).pipe(u(()=>this.isLoading=!1)).subscribe({next:e=>{this.successMessage=e.message,this.forgotForm.reset()},error:e=>{this.errorMessage=e.error?.message||"Une erreur est survenue. Veuillez r\xE9essayer."}})}get emailControl(){return this.forgotForm.get("email")}static{this.\u0275fac=function(e){return new(e||t)(p(L),p(S))}}static{this.\u0275cmp=v({type:t,selectors:[["app-forgot-password"]],decls:19,vars:3,consts:[[1,"forgot-page"],[1,"bg-blob","blob-1"],[1,"bg-blob","blob-2"],[1,"forgot-container"],[1,"card-glass"],[1,"text-center","mb-4"],[1,"icon-circle","mb-3"],[1,"fas","fa-key"],[1,"text-navy","fw-bold","mb-2"],[1,"text-secondary","text-sm"],["class","alert alert-success d-flex align-items-center",4,"ngIf"],["class","alert alert-danger d-flex align-items-center",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"text-center","mt-4"],["routerLink","/login",1,"text-decoration-none","text-navy","fw-bold","small","hover-gold"],[1,"fas","fa-arrow-left","me-2"],[1,"alert","alert-success","d-flex","align-items-center"],[1,"fas","fa-check-circle","me-3"],[1,"alert","alert-danger","d-flex","align-items-center"],[1,"fas","fa-exclamation-circle","me-3"],[3,"ngSubmit","formGroup"],[1,"form-group","mb-4"],["for","email",1,"form-label","text-navy","fw-bold"],[1,"fas","fa-envelope","me-2"],["type","email","id","email","formControlName","email","placeholder","exemple@isetk.rnu.tn",1,"form-control","form-control-lg"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-lg","w-100","fw-bold","shadow-gold",3,"disabled"],[4,"ngIf"],[1,"invalid-feedback"],[1,"fas","fa-spinner","fa-spin","me-2"],[1,"fas","fa-paper-plane","ms-2"]],template:function(e,d){e&1&&(o(0,"div",0),s(1,"div",1)(2,"div",2),o(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),s(7,"i",7),i(),o(8,"h2",8),a(9,"Mot de passe oubli\xE9 ?"),i(),o(10,"p",9),a(11," Entrez votre email acad\xE9mique (@isetk.rnu.tn) pour recevoir un lien de r\xE9initialisation. "),i()(),c(12,G,4,1,"div",10)(13,A,4,1,"div",11)(14,B,11,8,"form",12),o(15,"div",13)(16,"a",14),s(17,"i",15),a(18," Retour \xE0 la connexion "),i()()()()()),e&2&&(n(12),l("ngIf",d.successMessage),n(),l("ngIf",d.errorMessage),n(),l("ngIf",!d.successMessage))},dependencies:[y,w,N,I,F,E,k,O,z,P,M],styles:[".forgot-page[_ngcontent-%COMP%]{min-height:100vh;position:relative;background-color:#f8fafc;display:flex;align-items:center;justify-content:center;overflow:hidden;padding:1rem}.bg-blob[_ngcontent-%COMP%]{position:absolute;border-radius:50%;filter:blur(80px);z-index:0;opacity:.6}.blob-1[_ngcontent-%COMP%]{width:400px;height:400px;background:#0055a433;top:-100px;right:-100px}.blob-2[_ngcontent-%COMP%]{width:300px;height:300px;background:#f59e0b33;bottom:-50px;left:-50px}.forgot-container[_ngcontent-%COMP%]{width:100%;max-width:480px;position:relative;z-index:10}.card-glass[_ngcontent-%COMP%]{background:#ffffffe6;backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.5);border-radius:24px;padding:3rem;box-shadow:0 20px 40px #0000000d}.icon-circle[_ngcontent-%COMP%]{width:80px;height:80px;background:#0055a41a;color:#0055a4;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;margin:0 auto}.form-control[_ngcontent-%COMP%]{border-radius:12px;padding:1rem;border:2px solid #e2e8f0;background:#f8fafc;font-size:1rem;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#0055a4;box-shadow:0 0 0 4px #0055a41a;background:#fff}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#ef4444}.form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 4px #ef44441a}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0055a4,#004080);border:none;padding:1rem;border-radius:12px;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 20px #0055a44d}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.7;transform:none}.text-navy[_ngcontent-%COMP%]{color:#001b44}.hover-gold[_ngcontent-%COMP%]:hover{color:#f59e0b!important}.shadow-gold[_ngcontent-%COMP%]{box-shadow:0 4px 15px #f59e0b33}"]})}};export{T as ForgotPasswordComponent};
