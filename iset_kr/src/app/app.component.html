<header class="main-header transparent-header"
  *ngIf="!isAdminRoute && !isLoginPage && !isContactPage && !isFormationsPage && !isCertificationsPage && !isFourCPage && !isMotDirecteurPage && !isPresentationPage && !isDepartmentPage && !isProjetsPage && !isVieEtudiantePage && !isQualitePage">
  <div class="header-container">
    <!-- Logo & Title -->
    <div class="logo-section" routerLink="/">
      <div class="logo-img">
        <img src="assets/logo-iset.jpeg" alt="Logo ISET Kairouan">
      </div>
      <div class="institution-name">
        <div class="main-name">INSTITUT SUPÉRIEUR DES</div>
        <div class="sub-name">ETUDES TECHNOLOGIQUES DE Kairouan</div>
      </div>
    </div>

    <!-- Navigation Icons & Actions -->
    <div class="header-actions">
      <button class="action-icon search-btn"><i class="fas fa-search"></i></button>

      <a routerLink="/contact" class="nav-link hide-on-mobile">Contactez-nous</a>
      <a routerLink="/formations" class="nav-link hide-on-mobile">Formations</a>

      <button class="extranet-btn hide-on-mobile" (click)="openStudentSpace()">
        <i class="fas fa-users-viewfinder"></i>
        <span>Espace Extranet</span>
      </button>

      <a routerLink="/login" class="login-btn-compact btn-login-premium" title="Connexion">
        <i class="fas fa-sign-in-alt"></i>
        <span class="hide-on-mobile">Connexion</span>
      </a>

      <button class="menu-toggle" (click)="toggleMenu()">
        <div class="hamburger">
          <span></span>
          <span></span>
          <span></span>
        </div>
        <span class="menu-text">MENU</span>
      </button>
    </div>
  </div>
</header>

<!-- Full-Screen Menu Overlay -->
<div class="menu-overlay-full" [class.open]="isMenuOpen">
  <div class="menu-bg-campus"></div>
  <div class="menu-sidebar-blue">
    <div class="menu-logo-section">
      <div class="logo-img">
        <img src="assets/logo-iset.jpeg" alt="ISET Kairouan" class="h-12">
      </div>
      <div class="institution-name">
        <div class="main-name">INSTITUT SUPÉRIEUR DES</div>
        <div class="sub-name">ETUDES TECHNOLOGIQUES DE Kairouan</div>
      </div>
    </div>

    <nav class="overlay-nav">
      <div class="nav-main-list">
        <a routerLink="/" (click)="closeMenu()" routerLinkActive="active">
          <span class="nav-text">Actualités</span>
        </a>
        <a (click)="selectSubMenu('institut')" [class.active-link]="activeSubMenu === 'institut'" class="has-submenu">
          <span class="nav-text">Institut</span>
        </a>
        <a routerLink="/vie-universitaire" (click)="closeMenu()" routerLinkActive="active">
          <span class="nav-text">Vie Universitaire</span>
        </a>
        <a routerLink="/formations" (click)="closeMenu()" routerLinkActive="active">
          <span class="nav-text">Formation</span>
        </a>
        <a routerLink="/qualite" (click)="closeMenu()" routerLinkActive="active">
          <span class="nav-text">Management Qualité</span>
        </a>
        <a routerLink="/projets" (click)="closeMenu()" routerLinkActive="active">
          <span class="nav-text">Projets et partenariats</span>
        </a>
        <a routerLink="/4c" (click)="closeMenu()" routerLinkActive="active">
          <span class="nav-text">Centre 4C</span>
        </a>
        <a routerLink="/contact" (click)="closeMenu()" routerLinkActive="active">
          <span class="nav-text">Contact</span>
        </a>
      </div>

      <!-- Submenu Content -->
      <div class="submenu-container" [class.visible]="activeSubMenu === 'institut'">
        <div class="submenu-inner">
          <div class="submenu-item">
            <a routerLink="/institut/mot-du-directeur" (click)="closeMenu()">Message du Directeur</a>
          </div>
          <div class="submenu-item">
            <a routerLink="/institut/presentation" (click)="closeMenu()">Présentation</a>
          </div>
          <div class="submenu-item has-arrow" [class.active-sub]="activeSubSubMenu === 'departements'">
            <a (click)="selectSubSubMenu('departements')">Départements <i class="fas fa-chevron-right"></i></a>

            <div class="sub-submenu-list" *ngIf="activeSubSubMenu === 'departements'">
              <a routerLink="/departement/genie-electrique" (click)="closeMenu()">- Génie Électrique (GE)</a>
              <a routerLink="/departement/genie-mecanique" (click)="closeMenu()">- Génie Mécanique (GM)</a>
              <a routerLink="/departement/informatique" (click)="closeMenu()">- Technologies de l'Informatique (TI)</a>
              <a routerLink="/departement/gestion" (click)="closeMenu()">- Economie et Gestion (AA)</a>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <div class="menu-footer-pro">
      <div class="contact-info">
        <div class="info-item">
          <i class="fas fa-phone-alt"></i>
          <span>77 323 350 – 77 323 300</span>
        </div>
        <div class="info-item">
          <i class="fas fa-envelope"></i>
          <span>isetkairouan@kairouan.r-iset.tn</span>
        </div>
      </div>
    </div>
  </div>

  <button class="close-menu-btn" (click)="closeMenu()">
    <i class="fas fa-times"></i>
    <span>FERMER</span>
  </button>

  <div class="diagonal-stripes"></div>
</div>

<!-- Router Outlet -->
<router-outlet></router-outlet>

<!-- Back to Home Button (Specific pages) -->
<a routerLink="/" class="btn-back-home shadow-lg"
  *ngIf="isCertificationsPage || isMotDirecteurPage || isPresentationPage || isFourCPage || isFormationsPage || isDepartmentPage || isProjetsPage || isVieEtudiantePage || isQualitePage"
  title="Retour à l'accueil">
  <i class="fas fa-home"></i>
</a>

<!-- Footer -->
<footer class="main-footer"
  *ngIf="!isAdminRoute && !isLoginPage && !isContactPage && !isFormationsPage && !isCertificationsPage && !isFourCPage && !isMotDirecteurPage && !isPresentationPage && !isDepartmentPage && !isProjetsPage && !isVieEtudiantePage && !isQualitePage">
  <div class="footer-content">
    <div class="footer-column">
      <h4>ISET Kairouan</h4>
      <p>Institut Supérieur des Études Technologiques de Kairouan, un établissement public d'enseignement supérieur
        qui
        forme des techniciens supérieurs et des ingénieurs dans les domaines technologiques.</p>
    </div>

    <div class="footer-column">
      <h4>LIENS RAPIDES</h4>
      <ul>
        <li><a routerLink="/formations">Formations & Diplômes</a></li>
        <li><a routerLink="/services">Inscription & Admission</a></li>
        <li><a href="#">Bibliothèque Numérique</a></li>
        <li><button (click)="openStudentSpace()"
            style="background: none; border: none; cursor: pointer; font: inherit; color: rgba(255, 255, 255, 0.85); text-decoration: none; transition: color 0.3s; padding: 0;">Espace
            Étudiant</button></li>
        <li><a routerLink="/certifications">Certifications ISO</a></li>
      </ul>
    </div>

    <div class="footer-column">
      <h4>CONTACT</h4>
      <ul class="contact-info">
        <li><i class="fas fa-map-marker-alt"></i> <span>ISET de Kairouan – Campus Universitaire 3 199 Raccada –
            Kairouan</span></li>
        <li><i class="fas fa-phone"></i> <span>77 323 350 – 77 323 300</span></li>
        <li><i class="fas fa-fax"></i> <span>77 323 320</span></li>
        <li><i class="fas fa-envelope"></i> <span>contact&#64;isetk.rnu.tn</span></li>
        <li><i class="fas fa-clock"></i> <span>Lundi - Vendredi: 8h00 - 17h00</span></li>
      </ul>
    </div>
  </div>

  <div class="footer-bottom">
    <p>&copy; 2025 ISET Kairouan. Tous droits réservés. | <a href="#" style="color:#a3d5ff;">Mentions légales</a> |
      <a href="#" style="color:#a3d5ff;">Politique de confidentialité</a> | <a href="#" style="color:#a3d5ff;">Plan du
        site</a>
    </p>
    <p style="margin-top: 0.5rem; font-size: 0.85rem;">Certifié ISO 9001:2015 et ISO 21001:2018</p>
  </div>
</footer>