<main class="dept-detail-page" *ngIf="department; else notFound">
    <!-- 1. Hero Banner -->
    <section class="dept-hero">
        <div class="light-streak streak-1"></div>
        <div class="light-streak streak-2"></div>
        <div class="hero-canvas"
            [style.backgroundImage]="'linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url(' + department.heroImage + ')'">
        </div>
        <div class="hero-overlay"></div>
        <div class="container position-relative z-index-10 text-center">
            <div class="badge-premium animate-fade-down mb-4">Pôle Académique</div>
            <h1 class="display-2 fw-black text-white mb-4 animate-reveal">
                Département <span class="text-gold-gradient title-glow">{{ department.name }}</span>
            </h1>
            <p class="h4 text-white-50 fw-light animate-fade-up delay-1 max-w-700 mx-auto ls-1">
                {{ department.description }}
            </p>

            <div class="hero-stats-pro mt-5 animate-fade-up delay-2">
                <div class="stat-pro-bubble" *ngFor="let stat of department.stats">
                    <span class="stat-val-pro">{{ stat.value }}</span>
                    <span class="stat-lbl-pro">{{ stat.label }}</span>
                </div>
            </div>

            <div class="scroll-indicator animate-bounce mt-5">
                <div class="mouse"></div>
            </div>
        </div>
    </section>

    <!-- 2. Vision & Specialties -->
    <section class="py-12 bg-white position-relative overflow-hidden animate-on-scroll">
        <div class="decor-circle decor-1"></div>
        <div class="decor-blob-subtle"></div>
        <div class="container">
            <div class="text-center mb-10">
                <div class="section-label-pro">EXPERTISE & SAVOIR-FAIRE</div>
                <h2 class="display-4 fw-black text-navy mt-2">Nos Spécialités</h2>
                <div class="title-line-gold mx-auto mt-3"></div>
            </div>

            <div class="row g-4">
                <div class="col-lg-6" *ngFor="let spec of department.specialties">
                    <div class="pro-feature-card h-100">
                        <div class="card-glow"></div>
                        <div class="card-icon-main"><i class="fas" [class]="spec.icon"></i></div>
                        <h3 class="fw-black text-navy mb-3 fs-3">{{ spec.name }}</h3>
                        <p class="text-secondary fs-5">{{ spec.description }}</p>
                        <div class="mt-4" *ngIf="spec.pdf">
                            <a [href]="spec.pdf" target="_blank" class="btn-pro-link text-gold">
                                <i class="fas fa-file-pdf me-2"></i> Visualiser Plan d'Étude
                            </a>
                        </div>
                        <div class="mt-3" *ngIf="spec.route">
                            <a [routerLink]="['/specialite', spec.route]" class="btn btn-primary">
                                <i class="fas fa-arrow-right me-2"></i> En savoir plus
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 3. Leadership & Infrastructure -->
    <section class="py-12 bg-light-gradient animate-on-scroll">
        <div class="container">
            <div class="row g-5 align-items-center">
                <!-- Head of Dept -->
                <div class="col-lg-7 animate-slide-right">
                    <div class="premium-summary-card shadow-3d p-0 overflow-hidden">
                        <div class="bg-navy-pro p-5 text-white">
                            <div class="d-flex align-items-center gap-4">
                                <div class="hod-avatar-box">
                                    <i class="fas fa-user-tie text-gold-pro"></i>
                                </div>
                                <div>
                                    <h4 class="h3 fw-black mb-1 text-gold-pro">{{ department.headOfDepartment.name }}
                                    </h4>
                                    <span class="small uppercase tracking-widest opacity-70">{{
                                        department.headOfDepartment.role }}</span>
                                </div>
                            </div>
                        </div>
                        <div class="p-5 p-lg-6 bg-white">
                            <div class="quote-container-pro">
                                <p class="h4 fw-light text-secondary lh-lg mb-0">
                                    <i class="fas fa-quote-left text-gold-pro me-3"></i>
                                    {{ department.headOfDepartment.message }}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Labs -->
                <div class="col-lg-5 animate-slide-left">
                    <div class="labs-showcase">
                        <div class="section-label-pro mb-4">INFRASTRUCTURE</div>
                        <h2 class="h1 fw-black text-navy mb-5">Laboratoires</h2>

                        <div class="iso-award-card mb-3" *ngFor="let lab of department.labs">
                            <div class="award-icon-box small">
                                <i class="fas fa-flask text-white"></i>
                            </div>
                            <div class="award-text">
                                <h5 class="fw-bold text-navy mb-0">{{ lab }}</h5>
                                <div class="small text-gold uppercase fw-black ls-1">Elite Standard</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 4. Faculty Preview -->
    <section class="py-12 bg-white" *ngIf="teachers && teachers.length > 0">
        <div class="container text-center">
            <h2 class="display-5 fw-bold mb-4 text-navy">Notre Corps Enseignant</h2>
            <p class="lead mb-8 text-muted mx-auto" style="max-width: 700px;">
                Découvrez les experts qui accompagnent nos étudiants vers l'excellence académique et professionnelle.
            </p>

            <div class="row g-4 justify-content-center">
                <!-- Top 5 Teachers -->
                <div class="col-6 col-md-4 col-lg-2" *ngFor="let teacher of teachers">
                    <div class="teacher-preview-card text-center h-100 animate-fade-up">
                        <div class="teacher-img-wrapper mb-3 mx-auto">
                            <img [src]="dataService.getImageUrl(teacher.profileImage, teacher.name)"
                                [alt]="teacher.name" class="teacher-img">
                        </div>
                        <h5 class="teacher-name mb-1 small fw-bold">{{ teacher.name }}</h5>
                        <p class="teacher-grade tiny text-muted mb-0">{{ teacher.grade }}</p>
                    </div>
                </div>

                <!-- See More Card -->
                <div class="col-6 col-md-4 col-lg-2">
                    <a [routerLink]="['/departement', departmentId, 'enseignants']"
                        class="teacher-preview-card plus-card text-center d-flex flex-column align-items-center justify-content-center h-100 animate-fade-up border-dashed">
                        <div class="plus-icon-wrapper mb-3">
                            <i class="fas fa-plus fa-2x"></i>
                        </div>
                        <h5 class="teacher-name mb-1 small fw-black">Voir Plus</h5>
                        <p class="teacher-grade tiny text-muted mb-0">Tout le corps enseignant</p>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- 5. CTA -->
    <section class="py-12 bg-white text-center animate-on-scroll">
        <div class="container">
            <h2 class="display-5 fw-black text-navy mb-5">Prêt à intégrer le département {{ department.name }} ?</h2>
            <div class="d-flex justify-content-center gap-4 flex-wrap">
                <a routerLink="/formations" class="btn-pro btn-gold-fill">Explorer les Formations</a>
                <a routerLink="/contact" class="btn-pro btn-navy-outline">Nous Contacter</a>
            </div>
        </div>
    </section>
    </section>

    <!-- Return to Home Button -->
    <a routerLink="/" class="dept-back-home" title="Retour à l'accueil">
        <i class="fas fa-home"></i>
    </a>
</main>

<ng-template #notFound>
    <div class="not-found-modern text-center py-12">
        <i class="fas fa-search display-1 text-gold-pro mb-4"></i>
        <h2 class="display-4 fw-black text-navy">Département non trouvé</h2>
        <p class="text-secondary fs-5 mt-3 mb-5">Le département demandé n'existe pas ou la page est en cours de
            construction.</p>
        <a routerLink="/" class="btn-pro btn-gold-fill">Retour à l'accueil</a>
    </div>
</ng-template>